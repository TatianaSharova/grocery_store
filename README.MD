Grocery store - backend API-сервис для магазина продуктов. Покупатели могут просматривать продукты, их категорию или подкатегория, складывать продукты в корзину, редактировать их количество в корзине или вовсе удалить отдельный продукт или очистить всю корзину сразу. Администраторы могут управлять каталогом товаров, категориями, подкатегориям, пользователями и их корзинами через интерфейс администрирования Django или API.
                
Стек: Python, Django, DRF, Sqlite, pytest.                               
                     
___
**Как запустить проект:**
-----------
Клонировать репозиторий и перейти в него в командной строке:

```
git clone https://github.com/TatianaSharova/grocery_store.git
```
**_Запуск через cmd:_**                                                 

1. Создать и активировать виртуальное окружение:

Для Linux/macOS:
```
python3 -m venv venv
```
```
source venv/bin/activate
```
Для Windows:
```
python -m venv venv
```
```
source venv/Scripts/activate
```
2. Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```
3. Выполнить миграции:   
```
сd store
```                                                         
Для Linux/macOS:
```
python3 manage.py migrate
```
Для Windows:
```
python manage.py migrate
```
3. Заполните базу данных:                                                     
Для Linux/macOS:
```
python3 manage.py loaddata products.json
```
Для Windows:
```
python manage.py loaddata products.json
```
5. Создайте админа:            
Для Linux/macOS:
```
python3 manage.py createsuperuser
```
Для Windows:
```
python manage.py createsuperuser
```
6. Запустить проект:
Для Linux/macOS:
```
python3 manage.py runserver
```
Для Windows:
```
python manage.py runserver
```
                       
Теперь приложение доступно по адресу http://127.0.0.1:8000
                                         
**Доступ к API**
-----------
Анонимные пользователи могут просматривать продукты, категории и подкатегории, не могут совершать операции с корзиной.                    
Админы могут совершать CRUD операции с продуктами, категориями, подкатегориям, юзерами и корзиной.                      
Для авторизации используются токены.                                  
                                                                               
Процесс регистрации и авторизации:
1. Отправить POST-запрос с телом {"username": "name", "password": "yourpassword", "email": "email@mail.com"} на эндпоинт:
```
http://127.0.0.1:8000/api/users/
```
2. Отправить POST-запрос с телом {"username": "name", "password": "yourpassword"} на эндпоинт:
```
http://127.0.0.1:8000/api/auth/token/login/
```
Полученный в ответе токен в запросах добавить в Headers = {"Authorization": "Token yourtoken"}

**Использование API**
-----------
1. Просмотр списка товаров или определенный товар по id:

```
GET http://127.0.0.1:8000/api/products/
GET http://127.0.0.1:8000/api/products/id/
```
Предусмотрена пагинация: по 3 товара на странице.
2. Просмотр списка продуктовых категорий или определенную категорию по id:
```
GET http://127.0.0.1:8000/api/groups/
GET http://127.0.0.1:8000/api/groups/id/
```
Предусмотрена пагинация: по 3 категории на странице.
3. Просмотр списка продуктовых подкатегорий или определенную подкатегорию по id:
```
GET http://127.0.0.1:8000/api/types/
GET http://127.0.0.1:8000/api/types/id/
```
Предусмотрена пагинация: по 3 подкатегории на странице.
4. Добавление продукта в корзину (только для авторизованных пользователей):
```
POST http://127.0.0.1:8000/api/cart/
body example: {"product": "Молоко 2%", "amount": 1}
```
5. Просмотр своей корзины (только для авторизованных пользователей):
```
GET http://127.0.0.1:8000/api/cart/
```
6. Изменение количества продукта в корзине:
```
PATCH http://127.0.0.1:8000/api/cart/update-product/
body example: {"product": "Молоко 2%", "amount": 2}
```
7. Удаление продукта из корзины (только для авторизованных пользователей):
```
PATCH http://127.0.0.1:8000/api/cart/remove-product/
body example: {"product": "Молоко 2%"}
```
8. Очистка всей корзины (только для авторизованных пользователей):
```
DELETE http://127.0.0.1:8000/api/cart/clear-cart/
```
                    
Также админ может совершать CRUD-операции с категориями, подкатегориями, пользователями, товарами.

**Администрирование**
-----------
Админка находится по адресу:
```
http://127.0.0.1:8000/admin/
```
Зайдите в админку, используя ранее созданный пароль и имя для админа. В админ-хоне поддерживается весь функционал сервиса: можно создавать, изменять и удалять товары, категории, подкатегории, добавлять товары в корзины пользователей и редактировать их.
                            
**Тестирование**
-----------
Pytest тесты расположены в директории grocery_store/store/products/pytest_tests. Чтобы их запустить из директории grocery_store/store, выполните код:
```
pytest
```
                            
**Документация:**                                      
Документацию к API после запуска проекта можно посмотреть по адресам:
```
http://127.0.0.1:8000/schema/redoc/
```
```
http://127.0.0.1:8000/schema/swagger-ui/
```

### Автор
[Татьяна Шарова](https://github.com/TatianaSharova)